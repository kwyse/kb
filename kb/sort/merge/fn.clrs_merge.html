<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `clrs_merge` fn in crate `kb`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, clrs_merge">

    <title>kb::sort::merge::clrs_merge - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../main.css">
    

    
    
</head>
<body class="rustdoc fn">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'><a href='../../index.html'>kb</a>::<wbr><a href='../index.html'>sort</a>::<wbr><a href='index.html'>merge</a></p><script>window.sidebarCurrent = {name: 'clrs_merge', ty: 'fn', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Function <a href='../../index.html'>kb</a>::<wbr><a href='../index.html'>sort</a>::<wbr><a href='index.html'>merge</a>::<wbr><a class="fn" href=''>clrs_merge</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../src/kb/sort/merge.rs.html#224-246' title='goto source code'>[src]</a></span></h1>
<pre class='rust fn'>pub fn clrs_merge(values: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.f64.html">f64</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, p: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, q: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, r: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</pre><div class='docblock'><p>CLRS version of the merge operation used by merge sort</p>

<p>Merges two sorted subsequences in <em>O(n)</em> time, where <em>n = r - p</em>.</p>

<p>This implementation includes a sentinel value to simplify the
implementation. It limits the sort to types that have a logical maximum
value.</p>

<h1 id='loop-invariant' class='section-header'><a href='#loop-invariant'>Loop invariant</a></h1>
<p>At the start of the merge operation loop, <code>values[p..k]</code> contains the <em>k -
p</em> smallest elements of <code>left[0..n1]</code> and <code>right[0..n2]</code>, in sorted order.
Also, <code>left[i]</code> and <code>right[j]</code> are the smallest elements of their slices
that have yet to be copied back into <code>values</code>.</p>

<p><em>Initialization</em>: To begin with, <em>k = p</em>, so <code>values[p..k]</code> is empty, which
contains the zero smallest elements of <code>left</code> and <code>right</code>. Also, <code>i</code> and <code>j</code>
point to the first elements of their slices, which are the smallest elements
because the slices are sorted.</p>

<p><em>Maintenance</em>: If <code>left[i]</code> is less than <code>right[j]</code>, <code>left[i]</code> will be
copied, meaning <code>values[p..k + 1]</code> will now contain the <em>k - p + 1</em>
smallest elements. <em>k</em> and <em>i</em> are both incremented, reestablishing the
loop invariant for the next iteration. This process is symmetric if <code>right</code>
holds the next smallest element.</p>

<p><em>Termination</em>: Upon termination, <em>k = r</em>, so <code>values[p..k]</code> is
<code>values[p..r]</code>, and holds the <em>k - p</em> smallest elements in <code>left</code> and
<code>right</code>. <code>left</code> and <code>right</code> are both pointing to their sentinel values,
which are the smallest values in their respective slices.</p>

<h1 id='example' class='section-header'><a href='#example'>Example</a></h1>
<p>Imagine having two sorted sets of cards face up on a table, with the
smallest card on top. We want to merge the two piles into one pile. We do
this by taking the smaller of the two visible cards and placing them in a
new pile. Once one of the input piles is empty, we take all of the remaining
cards in the remaining pile and put them in the output pile.</p>

<pre><code class="language-text">          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 2 | 4 | 5 | 7 | 1 | 2 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +--++---+---+---+---+---+---+---+
           k ^
             +------------------+
                                |
  +---+---+---+---+---+       +-+-+---+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
    i                           j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 4 | 5 | 7 | 1 | 2 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+--++---+---+---+---+---+---+
               k ^
    +------------+
    |
  +-+-+---+---+---+---+       +---+---+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
    i                               j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 5 | 7 | 1 | 2 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+---+--++---+---+---+---+---+
                   k ^
                     +--------------+
                                    |
  +---+---+---+---+---+       +---+-+-+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
        i                           j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 2 | 7 | 1 | 2 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+---+---+--++---+---+---+---+
                       k ^
                         +--------------+
                                        |
  +---+---+---+---+---+       +---+---+-+-+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
        i                               j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 2 | 3 | 1 | 2 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+---+---+---+--++---+---+---+
                           k ^
        +--------------------+
        |
  +---+-+-+---+---+---+       +---+---+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
        i                                   j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 2 | 3 | 4 | 2 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+---+---+---+---+--++---+---+
                               k ^
            +--------------------+
            |
  +---+---+-+-+---+---+       +---+---+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
            i                               j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 2 | 3 | 4 | 5 | 3 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+---+---+---+---+---+--++---+
                                   k ^
                                     +------+
                                            |
  +---+---+---+---+---+       +---+---+---+-+-+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
                i                           j



          +---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 2 | 3 | 4 | 5 | 6 | 6 |
          |   |   |   |   |   |   |   |   |
          +---+---+---+---+---+---+---+--++
                                       k ^
                +------------------------+
                |
  +---+---+---+-+-+---+       +---+---+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
                i                               j



          +---+---+---+---+---+---+---+---+---+
          |   |   |   |   |   |   |   |   |
        V | 1 | 2 | 2 | 3 | 4 | 5 | 6 | 7 |
          |   |   |   |   |   |   |   |   |
          +---+---+---+---+---+---+---+---+---+
                                            k


  +---+---+---+---+---+       +---+---+---+---+---+
  |   |   |   |   |   |       |   |   |   |   |   |
L | 2 | 4 | 5 | 7 | ∞ |     R | 1 | 2 | 3 | 6 | ∞ |
  |   |   |   |   |   |       |   |   |   |   |   |
  +---+---+---+---+---+       +---+---+---+---+---+
                    i                           j
</code></pre>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../";
        window.currentCrate = "kb";
    </script>
    <script src="../../../main.js"></script>
    <script defer src="../../../search-index.js"></script>
</body>
</html>